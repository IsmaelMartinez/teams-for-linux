{
    "id": 3013826342,
    "number": 1669,
    "title": "[Bug]: Using teams-for-linux with certain custom icons crashes on start-up",
    "body": "### Can you reproduce this bug in the website/PWA?\n\nNot applicable\n\n### Describe the bug\n\nApp crashes when starting a second instance (custom class/user data dir)\n\n### What package are you using?\n\nrpm\n\n### Version\n\n2.0.9\n\n### Reproduction steps\n\n```markdown\nTrying to run a second instance (since Skype's closing up and all that).\nThe app crashes trying to send a enormous message through DBus\n\n[vps@druid]~/.local/share/applications$ /opt/teams-for-linux/teams-for-linux --appIcon=/home/vps/Skype-icon.png --class=teams-skype --user-data-dir=/home/vps/.config/teams-skype\nNo config file found, using default values\nInitialising logger with config: {\"transports\":{\"console\":{\"level\":\"info\"},\"file\":{\"level\":false}}}\n14:14:21.297 › configPath: /home/vps/.config/teams-skype\n14:14:21.298 › Running under Wayland, switching to PipeWire...\n14:14:21.298 › Setting WM_CLASS property to custom value teams-skype\n14:14:21.511 › (node:561558) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.\n(Use `teams-for-linux --trace-deprecation ...` to show where the warning was created)\n[561641:0423/141421.630129:ERROR:vaapi_wrapper.cc(1243)] Empty codec maximum resolution\n[561641:0423/141421.630207:ERROR:vaapi_wrapper.cc(1153)] FillProfileInfo_Locked failed for va_profile VAProfileJPEGBaseline and entrypoint VAEntrypointVLD\n[561558:0423/141421.756662:ERROR:connection.cc(733)] Cannot send request of length 67171084\ndbus[561558]: arguments to dbus_message_iter_append_fixed_array() were incorrect, assertion \"n_elements <= DBUS_MAXIMUM_ARRAY_LENGTH / _dbus_type_get_alignment (element_type)\" failed in file ../../dbus/dbus-message.c line 2918.\nThis is normally a bug in some application using the D-Bus library.\n\n  D-Bus not built with -rdynamic so unable to print a backtrace\nAborted (core dumped)\n```\n\n### Expected Behavior\n\n```markdown\nSecond instance should start.\n```\n\n### Debug\n\n```markdown\n[vps@druid]~/.local/share/applications$ /opt/teams-for-linux/teams-for-linux --webDebug --logConfig='{}' --appIcon=/home/vps/Skype-icon.png --class=teams-skype --user-data-dir=/home/vps/.config/teams-skype\nNo config file found, using default values\nInitialising logger with config: \"{}\"\n14:22:41.927 › File logging at /home/vps/.config/teams-skype/logs/main.log with level silly\n14:22:41.928 › Console logging enabled with level silly\n14:22:41.928 › Logger initialised\n14:22:41.928 › configPath: /home/vps/.config/teams-skype\n14:22:41.928 › configFile: {}\n14:22:41.930 › Running under Wayland, switching to PipeWire...\n14:22:41.930 › Setting WM_CLASS property to custom value teams-skype\n14:22:42.121 › (node:563186) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.\n(Use `teams-for-linux --trace-deprecation ...` to show where the warning was created)\n[563268:0423/142242.237276:ERROR:vaapi_wrapper.cc(1243)] Empty codec maximum resolution\n[563268:0423/142242.237361:ERROR:vaapi_wrapper.cc(1153)] FillProfileInfo_Locked failed for va_profile VAProfileJPEGBaseline and entrypoint VAEntrypointVLD\n[563186:0423/142242.368141:ERROR:connection.cc(733)] Cannot send request of length 67171084\n14:22:42.416 › processArgs: [\n  '/opt/teams-for-linux/teams-for-linux',\n  '--webDebug',\n  '--logConfig={}',\n  '--appIcon=/home/vps/Skype-icon.png',\n  '--class=teams-skype',\n  '--user-data-dir=/home/vps/.config/teams-skype'\n]\n14:22:42.417 › testing RegExp processArgs false\n14:22:42.417 › testing RegExp processArgs false\n14:22:42.417 › testing RegExp processArgs false\n14:22:42.417 › testing RegExp processArgs false\n14:22:42.417 › testing RegExp processArgs false\n14:22:42.417 › testing RegExp processArgs false\n14:22:42.417 › Waiting for network...\n14:22:42.417 › Testing network using net.request() for https://teams.microsoft.com/v2\n14:22:42.418 › Spellchecker is disabled!\ndbus[563186]: arguments to dbus_message_iter_append_fixed_array() were incorrect, assertion \"n_elements <= DBUS_MAXIMUM_ARRAY_LENGTH / _dbus_type_get_alignment (element_type)\" failed in file ../../dbus/dbus-message.c line 2918.\nThis is normally a bug in some application using the D-Bus library.\n\n  D-Bus not built with -rdynamic so unable to print a backtrace\nAborted (core dumped)\n```\n\n### Additional context\n\n_No response_",
    "state": "closed",
    "created_at": "2025-04-23T12:23:48+00:00",
    "updated_at": "2025-04-24T14:32:36+00:00",
    "closed_at": "2025-04-24T09:20:54+00:00",
    "user": "veselov",
    "assignee": "IsmaelMartinez",
    "labels": [
        "bug"
    ],
    "comments_count": 10,
    "html_url": "https://github.com/IsmaelMartinez/teams-for-linux/issues/1669",
    "is_pull_request": false
}