{
    "id": 3266208953,
    "number": 1765,
    "title": "feat: Implement cache management and Debian changelog generation (Issues #1756, #1691)",
    "body": "## Summary\r\n\r\nThis PR implements two major features and includes dependency updates:\r\n\r\n### üßπ Cache Management (Issue #1756)\r\n- **Problem**: Daily logout issues caused by cache overflow corrupting OAuth tokens\r\n- **Solution**: Configurable automatic cache cleanup system\r\n- **Default**: Disabled by default, requires explicit opt-in via configuration\r\n- **Location**: `app/cacheManager/`\r\n\r\n~~### üìã Debian Changelog Generation (Issue #1691)~~ (reverted in https://github.com/IsmaelMartinez/teams-for-linux/pull/1766)\r\n\r\n### üì¶ Dependency Updates\r\n\r\n#### üöÄ Electron 37.2.0 ‚Üí 37.2.4 Upgrade Benefits\r\n**Key fixes that may resolve existing issues:**\r\n\r\n> ‚ö†Ô∏è **Note**: The following correlations are based on Electron changelog analysis. We encourage users experiencing these issues to test this version and provide feedback on whether the problems are resolved.\r\n\r\n- **Issue #1757** (App automatically closes): **May be fixed** by window close callback crash fixes\r\n  - Related Electron fixes: Window close callback improvements in v37.2.4\r\n  - **Please test and report**: Users experiencing random app closures\r\n\r\n- **Issue #1762** (Screen sharing blurry): **May be improved** by desktop capture enhancements  \r\n  - Related Electron fixes: Desktop capture crash fixes in v37.2.1 + Chromium 138.0.7204.157 in v37.2.4\r\n  - **Please test and report**: Users experiencing poor screen sharing quality\r\n\r\n- **Issue #1743** (Cannot share screen): **May be fixed** by desktop capture crash fixes\r\n  - Related Electron fixes: Fixed desktop capture crashes in renderer processes (v37.2.1)\r\n  - **Please test and report**: Users unable to share screen\r\n\r\n- **Issue #1715** (Can't share screen - pipewire): **May be improved** by better Linux compatibility\r\n  - Related Electron fixes: Enhanced desktop capture and Linux integration improvements\r\n  - **Please test and report**: Users with PipeWire screen sharing issues\r\n\r\n- **Issue #1736** (Window resizing broken): **May be fixed** by window management improvements\r\n  - Related Electron fixes: Window callback and management stability improvements in v37.2.4\r\n  - **Please test and report**: Users experiencing window resize/maximize problems\r\n\r\n**Technical improvements from Electron 37.2.1-37.2.4:**\r\n- Fixed window close callback crashes that caused unexpected app termination\r\n- Enhanced desktop capture with reduced crashes and better quality\r\n- Updated Chromium to 138.0.7204.157 for security and performance\r\n- Improved child process crash handling and CSS rule processing\r\n- Better Linux desktop environment integration\r\n\r\n**Electron Release References:**\r\n- [Electron v37.2.4 Release Notes](https://github.com/electron/electron/releases/tag/v37.2.4)\r\n- [Electron v37.2.3 Release Notes](https://github.com/electron/electron/releases/tag/v37.2.3)\r\n- [Electron v37.2.2 Release Notes](https://github.com/electron/electron/releases/tag/v37.2.2)\r\n- [Electron v37.2.1 Release Notes](https://github.com/electron/electron/releases/tag/v37.2.1)\r\n\r\n#### üîß Other Dependencies\r\n- **ESLint**: Updated to 9.32.0 for better linting\r\n- **electron-builder**: Updated to 26.0.19 for improved builds  \r\n- **@homebridge/dbus-native**: Updated to 0.7.2 for ARM compatibility\r\n\r\n## Features Details\r\n\r\n### Cache Management\r\n- **Configurable**: Users can set cache size limits and check intervals\r\n- **Safe**: Preserves authentication tokens while cleaning temporary files\r\n- **Automatic**: Monitors cache size and cleans when threshold exceeded\r\n- **Logging**: Debug-level logging for monitoring cache activities\r\n\r\n**Configuration Example:**\r\n```json\r\n{\r\n  \"cacheManagement\": {\r\n    \"enabled\": true,\r\n    \"maxCacheSizeMB\": 300,\r\n    \"cacheCheckIntervalMs\": 3600000\r\n  }\r\n}\r\n```\r\n\r\n## Files Added\r\n- `app/cacheManager/index.js` - Cache management implementation\r\n- `app/cacheManager/README.md` - Documentation and usage guide\r\n- `scripts/generateDebianChangelog.js` - Changelog generator\r\n\r\n## Files Modified\r\n- `app/index.js` - Cache manager integration\r\n- `app/config/index.js` - Added cacheManagement configuration option\r\n- `app/config/README.md` - Updated configuration documentation\r\n- `package.json` - Dependency updates and FPM changelog config\r\n- `package-lock.json` - Lock file updates\r\n- `scripts/afterpack.js` - Debian changelog build integration\r\n- `com.github.IsmaelMartinez.teams_for_linux.appdata.xml` - Updated release notes\r\n\r\n## Testing\r\n\r\n- ‚úÖ All lint checks pass\r\n- ‚úÖ Cache management defaults to disabled (requires explicit opt-in)\r\n~~- ‚úÖ Debian changelog generation works correctly~~\r\n- ‚úÖ Build configuration validates successfully\r\n- ‚úÖ No security vulnerabilities introduced\r\n- ‚úÖ Electron upgrade addresses multiple existing issues\r\n\r\n## Migration Guide\r\n\r\n### For Users Experiencing Daily Logouts\r\nAdd to your config file:\r\n```json\r\n{\r\n  \"cacheManagement\": {\r\n    \"enabled\": true\r\n  }\r\n}\r\n```\r\n\r\n## Community Feedback Requested\r\n\r\n**üîç Testing Needed**: We believe the Electron upgrade may resolve several existing issues, but we need community validation:\r\n\r\n1. **Issue #1757 users**: Please test if the app still closes unexpectedly\r\n2. **Issue #1762 users**: Please test if screen sharing quality has improved\r\n3. **Issue #1743 users**: Please test if you can now share your screen\r\n4. **Issue #1715 users**: Please test if PipeWire screen sharing now works\r\n5. **Issue #1736 users**: Please test if window resizing/maximizing works properly\r\n\r\nPlease comment on the respective issues with your testing results after this release.\r\n\r\n## Related Issues\r\n\r\n- Fixes #1756 - Daily logout due to cache overflow\r\n- May fix #1757 - App automatically closes (Electron window crash fixes)\r\n- May improve #1762 - Screen sharing is blurry (Desktop capture + Chromium updates)\r\n- May fix #1743 - Cannot share screen (Desktop capture crash fixes)\r\n- May improve #1715 - Can't share screen pipewire (Better Linux compatibility)\r\n- May fix #1736 - Window resizing is broken (Window management improvements)\r\n- Updates dependencies for stability and security\r\n\r\n## Review Notes\r\n\r\n- Cache management is feature-flagged and disabled by default\r\n- Debian changelog follows proper Debian packaging standards\r\n- Electron upgrade provides significant stability improvements for window management and screen sharing\r\n- All changes maintain existing functionality while adding new capabilities\r\n- Comprehensive documentation included for both features\r\n- Community testing requested for Electron-related issue fixes",
    "state": "closed",
    "created_at": "2025-07-26T22:39:03+00:00",
    "updated_at": "2025-07-27T20:20:53+00:00",
    "closed_at": "2025-07-27T18:50:44+00:00",
    "user": "IsmaelMartinez",
    "assignee": null,
    "labels": [],
    "comments_count": 1,
    "html_url": "https://github.com/IsmaelMartinez/teams-for-linux/pull/1765",
    "is_pull_request": true
}