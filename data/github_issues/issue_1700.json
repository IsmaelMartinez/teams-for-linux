{
    "id": 3044099232,
    "number": 1700,
    "title": "[Bug]: Opening up links don't use the default browser again",
    "body": "### Can you reproduce this bug in the website/PWA?\n\nNo\n\n### Describe the bug\n\nLinks open up in chrome, not in default browser\n\n### What package are you using?\n\nsnap\n\n### Version\n\n2.0.9\n\n### Reproduction steps\n\n```markdown\n1. Open up teams\n2. open up link sent from another user\n3. Link opens in chrome.\n```\n\n### Expected Behavior\n\n```markdown\n1. Open up teams\n2. open up link sent from another user\n3. Link opens in default browser\n```\n\n### Debug\n\n```markdown\n$ teams-for-linux --webDebug --logConfig='{}' \nNo config file found, using default values\nInitialising logger with config: \"{}\"\n15:38:16.847 › File logging at /home/rweber/snap/teams-for-linux/796/.config/teams-for-linux/logs/main.log with level silly\n15:38:16.849 › Console logging enabled with level silly\n15:38:16.849 › Logger initialised\n15:38:16.849 › configPath: /home/rweber/snap/teams-for-linux/796/.config/teams-for-linux\n15:38:16.849 › configFile: {}\ndbus-send: /snap/teams-for-linux/796/lib/x86_64-linux-gnu/libdbus-1.so.3: version `LIBDBUS_PRIVATE_1.12.20' not found (required by dbus-send)\n15:38:16.895 › (node:47523) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.\n(Use `teams-for-linux --trace-deprecation ...` to show where the warning was created)\n\n(teams-for-linux:47523): Gtk-WARNING **: 15:38:17.038: Theme parsing error: gtk.css:1413:23: 'font-feature-settings' is not a valid property name\n\n(teams-for-linux:47523): Gtk-WARNING **: 15:38:17.045: Theme parsing error: gtk.css:3286:25: 'font-feature-settings' is not a valid property name\n\n(teams-for-linux:47523): Gtk-WARNING **: 15:38:17.048: Theme parsing error: gtk.css:3748:23: 'font-feature-settings' is not a valid property name\n[47523:0506/153817.152663:ERROR:object_proxy.cc(576)] Failed to call method: org.freedesktop.Secret.Service.ReadAlias: object_path= /org/freedesktop/secrets: org.freedesktop.DBus.Error.AccessDenied: An AppArmor policy prevents this sender from sending this message to this recipient; type=\"method_call\", sender=\":1.265\" (uid=1000 pid=47523 comm=\"/snap/teams-for-linux/796/teams-for-linux --no-san\" label=\"snap.teams-for-linux.teams-for-linux (enforce)\") interface=\"org.freedesktop.Secret.Service\" member=\"ReadAlias\" error name=\"(unset)\" requested_reply=\"0\" destination=\"org.freedesktop.secrets\" (uid=1000 pid=3999 comm=\"/usr/bin/gnome-keyring-daemon --foreground --compo\" label=\"unconfined\")\nlibGL error: MESA-LOADER: failed to open iris (search paths /snap/teams-for-linux/796/gnome-platform/usr/lib/x86_64-linux-gnu/dri)\nlibGL error: failed to load driver: iris\nlibGL error: MESA-LOADER: failed to open iris (search paths /snap/teams-for-linux/796/gnome-platform/usr/lib/x86_64-linux-gnu/dri)\nlibGL error: failed to load driver: iris\nlibGL error: MESA-LOADER: failed to open swrast (search paths /snap/teams-for-linux/796/gnome-platform/usr/lib/x86_64-linux-gnu/dri)\nlibGL error: failed to load driver: swrast\n[47620:0506/153817.291132:ERROR:angle_platform_impl.cc(49)] Display.cpp:1085 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\nERR: Display.cpp:1085 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\n[47620:0506/153817.291475:ERROR:gl_display.cc(495)] EGL Driver message (Critical) eglInitialize: Could not create a backing OpenGL context.\n[47620:0506/153817.291585:ERROR:gl_display.cc(767)] eglInitialize OpenGL failed with error EGL_NOT_INITIALIZED, trying next display type\n15:38:17.295 › processArgs: [\n  '/snap/teams-for-linux/796/teams-for-linux',\n  '--no-sandbox',\n  '--webDebug',\n  '--logConfig={}'\n]\n15:38:17.297 › testing RegExp processArgs false\n15:38:17.298 › testing RegExp processArgs false\n15:38:17.298 › testing RegExp processArgs false\n15:38:17.299 › testing RegExp processArgs false\n15:38:17.300 › Waiting for network...\n15:38:17.300 › Testing network using net.request() for https://teams.microsoft.com/v2\n[47620:0506/153817.302156:ERROR:angle_platform_impl.cc(49)] Display.cpp:1085 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\nERR: Display.cpp:1085 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\n[47620:0506/153817.302563:ERROR:gl_display.cc(495)] EGL Driver message (Critical) eglInitialize: Could not create a backing OpenGL context.\n[47620:0506/153817.302798:ERROR:gl_display.cc(767)] eglInitialize OpenGLES failed with error EGL_NOT_INITIALIZED\n[47620:0506/153817.302916:ERROR:gl_display.cc(802)] Initialization of all EGL display types failed.\n[47620:0506/153817.303060:ERROR:gl_ozone_egl.cc(26)] GLDisplayEGL::Initialize failed.\n15:38:17.304 › Spellchecker is disabled!\n[47620:0506/153817.320504:ERROR:angle_platform_impl.cc(49)] Display.cpp:1085 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\nERR: Display.cpp:1085 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\n[47620:0506/153817.320691:ERROR:gl_display.cc(495)] EGL Driver message (Critical) eglInitialize: Could not create a backing OpenGL context.\n[47620:0506/153817.320759:ERROR:gl_display.cc(767)] eglInitialize OpenGL failed with error EGL_NOT_INITIALIZED, trying next display type\n[47620:0506/153817.323270:ERROR:angle_platform_impl.cc(49)] Display.cpp:1085 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\nERR: Display.cpp:1085 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\n[47620:0506/153817.323533:ERROR:gl_display.cc(495)] EGL Driver message (Critical) eglInitialize: Could not create a backing OpenGL context.\n[47620:0506/153817.323854:ERROR:gl_display.cc(767)] eglInitialize OpenGLES failed with error EGL_NOT_INITIALIZED\n[47620:0506/153817.323990:ERROR:gl_display.cc(802)] Initialization of all EGL display types failed.\n[47620:0506/153817.324108:ERROR:gl_ozone_egl.cc(26)] GLDisplayEGL::Initialize failed.\n[47620:0506/153817.326531:ERROR:viz_main_impl.cc(183)] Exiting GPU process due to errors during initialization\n[47523:0506/153817.329218:ERROR:object_proxy.cc(576)] Failed to call method: org.freedesktop.login1.Manager.Inhibit: object_path= /org/freedesktop/login1: org.freedesktop.DBus.Error.AccessDenied: An AppArmor policy prevents this sender from sending this message to this recipient; type=\"method_call\", sender=\":1.904\" (uid=1000 pid=47523 comm=\"/snap/teams-for-linux/796/teams-for-linux --no-san\" label=\"snap.teams-for-linux.teams-for-linux (enforce)\") interface=\"org.freedesktop.login1.Manager\" member=\"Inhibit\" error name=\"(unset)\" requested_reply=\"0\" destination=\"org.freedesktop.login1\" (uid=0 pid=1865 comm=\"/usr/lib/systemd/systemd-logind\" label=\"unconfined\")\nMESA-LOADER: failed to open iris (search paths /snap/teams-for-linux/796/gnome-platform/usr/lib/x86_64-linux-gnu/dri)\nfailed to load driver: iris\nMESA-LOADER: failed to open kms_swrast (search paths /snap/teams-for-linux/796/gnome-platform/usr/lib/x86_64-linux-gnu/dri)\nfailed to load driver: kms_swrast\nMESA-LOADER: failed to open swrast (search paths /snap/teams-for-linux/796/gnome-platform/usr/lib/x86_64-linux-gnu/dri)\nfailed to load swrast driver\n15:38:18.002 › Network test successful with method https\n15:38:18.003 › Loading initial URL...\n[47523:0506/153818.455175:ERROR:CONSOLE(1)] \"Request Autofill.enable failed. {\"code\":-32601,\"message\":\"'Autofill.enable' wasn't found\"}\", source: devtools://devtools/bundled/core/protocol_client/protocol_client.js (1)\n[47523:0506/153818.455341:ERROR:CONSOLE(1)] \"Request Autofill.setAddresses failed. {\"code\":-32601,\"message\":\"'Autofill.setAddresses' wasn't found\"}\", source: devtools://devtools/bundled/core/protocol_client/protocol_client.js (1)\n15:38:18.496 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 1s, IdleState: 'active'\n15:38:18.843 › did-frame-finish-load {} true\n15:38:18.843 › did-finish-load\n15:38:20.311 › Badge count set to '0'\n15:38:20.318 › Badge count set to '0'\n15:38:21.691 › Badge count set to '0'\n15:38:22.905 › Badge count set to '1'\n15:38:23.177 › Badge count set to '7'\n[47523:0506/153823.623653:ERROR:CONSOLE(1)] \"Request Autofill.enable failed. {\"code\":-32601,\"message\":\"'Autofill.enable' wasn't found\"}\", source: devtools://devtools/bundled/core/protocol_client/protocol_client.js (1)\n[47523:0506/153823.623701:ERROR:CONSOLE(1)] \"Request Autofill.setAddresses failed. {\"code\":-32601,\"message\":\"'Autofill.setAddresses' wasn't found\"}\", source: devtools://devtools/bundled/core/protocol_client/protocol_client.js (1)\n15:38:23.628 › did-frame-finish-load {} false\n[47651:0506/153824.730831:ERROR:gles2_cmd_decoder_passthrough.cc(1094)] [GroupMarkerNotSet(crbug.com/242999)!:A000530014120000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader flag to opt in to lower security guarantees for trusted content.\n15:38:28.546 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\n15:38:38.549 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\n15:38:48.556 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\n15:38:58.559 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 1s, IdleState: 'active'\n15:39:08.561 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\n15:39:15.770 › Badge count set to '7'\n15:39:18.365 › testing RegExp onNewWindow false\n15:39:18.366 › Requesting to open 'www.softether.org'\n15:39:18.575 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\n15:39:28.579 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\n15:39:29.343 › window close\n^C15:39:33.988 › before-quit\n15:39:33.989 › window close\n15:39:34.175 › window closed\n15:39:34.176 › will-quit\n15:39:34.176 › quit\n```\n\n### Additional context\n\n_No response_",
    "state": "closed",
    "created_at": "2025-05-06T21:49:05+00:00",
    "updated_at": "2025-05-08T06:38:10+00:00",
    "closed_at": "2025-05-08T06:37:56+00:00",
    "user": "rustyscottweber",
    "assignee": "IsmaelMartinez",
    "labels": [
        "bug",
        "known issue/workaround"
    ],
    "comments_count": 4,
    "html_url": "https://github.com/IsmaelMartinez/teams-for-linux/issues/1700",
    "is_pull_request": false
}