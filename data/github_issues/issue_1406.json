{
    "id": 2525196997,
    "number": 1406,
    "title": "[1.10.2] Application does not terminate after closing",
    "body": "**Describe the bug**\r\nWhen the application is started on a command line via `teams-for-linux`, it starts polling in the form of  \r\n`16:36:11.324 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'`.\r\n\r\nWhen the application is closed, it never stops polling, nor does it return control to the command prompt.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. In Debian Bookworm, install application [as per the Readme](https://github.com/IsmaelMartinez/teams-for-linux#debianubuntu-and-other-derivatives)\r\n2. open a terminal, execute `$ teams-for-linux` => polling starts, the GUI opens, Teams can be used normally\r\n3. (Did some tests: call, camera on/off, screen share to/from; same for meeting)\r\n4. Close application\r\n5. Look at terminal, wait for several minutes => polling never stops, command prompt never reappears; Ctrl+C is necessary to properly terminate the application\r\n\r\n**Expected behavior**\r\nThe application terminates shortly after being closed. As normal for applications.\r\n\r\n**Screenshots**\r\nThe second line is emitted when closing the application. It repeats at the end after terminating the application forcefully with Ctrl+C, but none of the other lines associated with termination are present before that moment.\r\n```\r\n[...]\r\n16:31:17.492 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:31:25.209 › window close\r\n16:31:27.496 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:31:37.500 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:31:47.507 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:31:58.324 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:32:09.325 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:32:20.325 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:32:31.325 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:32:42.325 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:32:53.325 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:33:04.324 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:33:15.325 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:33:26.325 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:33:37.325 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:33:48.324 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:33:59.325 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:34:10.324 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:34:21.325 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:34:32.325 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:34:43.325 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:34:54.325 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:35:05.325 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:35:16.325 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:35:27.324 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:35:38.324 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:35:49.324 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:36:00.325 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:36:11.324 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:36:22.324 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:36:33.324 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:36:44.324 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n16:36:55.324 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n^C16:36:59.698 › before-quit\r\n16:36:59.699 › window close\r\n16:36:59.820 › window closed\r\n16:36:59.821 › will-quit\r\n16:36:59.821 › quit\r\n```\r\n\r\n**Desktop (please complete the following information):**\r\n - OS: Debian-Bookworm\r\n - Installation package deb\r\n - Version 1.10.2\r\n\r\n**Debug**\r\n(Abbreviated step 3 to just one test call. Apparently it can be completely omitted.)\r\n```\r\n$ teams-for-linux --webDebug --logConfig='{}'\r\nNo config file found, using default values\r\nall good with appLogLevels you aren't using them\r\nInitialising logger with config: \"{}\"\r\nLogger initialised with transports: {}\r\n18:12:41.540 › File logging at <home>/.config/teams-for-linux/logs/main.log with level silly\r\n18:12:41.541 › Console logging enabled with level silly\r\n18:12:41.541 › Logger initialised\r\n18:12:41.541 › configPath: <home>/.config/teams-for-linux\r\n18:12:41.542 › configFile: {}\r\n18:12:41.543 › Running under Wayland, switching to PipeWire...\r\n18:12:41.718 › processArgs: [\r\n'/opt/teams-for-linux/teams-for-linux',\r\n'--webDebug',\r\n'--logConfig={}'\r\n]\r\n18:12:41.719 › testing RegExp processArgs false\r\n18:12:41.719 › testing RegExp processArgs false\r\n18:12:41.719 › testing RegExp processArgs false\r\n18:12:41.719 › Testing network using net.request() for https://teams.microsoft.com/\r\n18:12:41.720 › Spellchecker is disabled!\r\n[29585:0913/181241.896476:ERROR:browser_main_loop.cc(280)] Gtk: gtk_widget_add_accelerator: assertion 'GTK_IS_ACCEL_GROUP (accel_group)' failed\r\n[29585:0913/181241.896570:ERROR:browser_main_loop.cc(280)] Gtk: gtk_widget_add_accelerator: assertion 'GTK_IS_ACCEL_GROUP (accel_group)' failed\r\n[29585:0913/181241.896589:ERROR:browser_main_loop.cc(280)] Gtk: gtk_widget_add_accelerator: assertion 'GTK_IS_ACCEL_GROUP (accel_group)' failed\r\n[29585:0913/181241.896603:ERROR:browser_main_loop.cc(280)] Gtk: gtk_widget_add_accelerator: assertion 'GTK_IS_ACCEL_GROUP (accel_group)' failed\r\n[29585:0913/181241.897048:ERROR:browser_main_loop.cc(280)] Gtk: gtk_widget_add_accelerator: assertion 'GTK_IS_ACCEL_GROUP (accel_group)' failed\r\n[29585:0913/181242.023891:ERROR:nss_util.cc(357)] After loading Root Certs, loaded==false: NSS error code: -8018\r\n18:12:42.114 › Network test successful with method https\r\n[29585:0913/181242.574863:ERROR:CONSOLE(1)] \"Request Autofill.enable failed. {\"code\":-32601,\"message\":\"'Autofill.enable' wasn't found\"}\", source: devtools://devtools/bundled/core/protocol_client/protocol_client.js (1)\r\n18:12:42.608 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n[29585:0913/181242.610020:ERROR:object_proxy.cc(576)] Failed to call method: org.freedesktop.ScreenSaver.GetActive: object_path= /org/freedesktop/ScreenSaver: org.freedesktop.DBus.Error.NotSupported: This method is not implemented\r\n18:12:43.037 › did-frame-finish-load {} true\r\n18:12:43.037 › did-finish-load\r\n18:12:44.278 › Badge count set to '0'\r\n18:12:44.290 › Badge count set to '0'\r\n18:12:45.126 › Badge count set to '0'\r\n[29585:0913/181246.602479:ERROR:CONSOLE(1)] \"Request Autofill.enable failed. {\"code\":-32601,\"message\":\"'Autofill.enable' wasn't found\"}\", source: devtools://devtools/bundled/core/protocol_client/protocol_client.js (1)\r\n18:12:46.606 › did-frame-finish-load {} false\r\n18:12:47.815 › did-frame-finish-load {} false\r\n[29585:0913/181247.919198:ERROR:CONSOLE(1)] \"Request Autofill.enable failed. {\"code\":-32601,\"message\":\"'Autofill.enable' wasn't found\"}\", source: devtools://devtools/bundled/core/protocol_client/protocol_client.js (1)\r\n18:12:48.380 › did-frame-finish-load {} false\r\n18:12:52.641 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n[29702:0913/181257.574808:ERROR:gl_surface_presentation_helper.cc(260)] GetVSyncParametersIfAvailable() failed for 1 times!\r\n[29702:0913/181257.575398:ERROR:gl_surface_presentation_helper.cc(260)] GetVSyncParametersIfAvailable() failed for 2 times!\r\n18:13:02.646 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n[29702:0913/181305.165750:ERROR:gl_surface_presentation_helper.cc(260)] GetVSyncParametersIfAvailable() failed for 3 times!\r\n18:13:12.678 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n18:13:22.679 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n18:13:26.215 › window close\r\n18:13:32.683 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n18:13:42.688 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n18:13:53.326 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n^C18:14:02.338 › before-quit\r\n18:14:02.339 › window close\r\n18:14:02.459 › window closed\r\n18:14:02.459 › will-quit\r\n18:14:02.460 › quit\r\n```\r\n\r\n**Additional context**\r\nfresh first-time installation, no restarts",
    "state": "closed",
    "created_at": "2024-09-13T16:19:25+00:00",
    "updated_at": "2024-09-27T11:31:23+00:00",
    "closed_at": "2024-09-20T02:59:40+00:00",
    "user": "Zsar",
    "assignee": null,
    "labels": [],
    "comments_count": 5,
    "html_url": "https://github.com/IsmaelMartinez/teams-for-linux/issues/1406",
    "is_pull_request": false
}