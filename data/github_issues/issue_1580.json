{
    "id": 2886611343,
    "number": 1580,
    "title": "[Bug]: Electron/Chromium window's memory is not freed when the window is closed",
    "body": "### Can you reproduce this bug in the website/PWA?\n\nNot applicable\n\n### Describe the bug\n\nI've recently looked into htop while teams was minimized to the tray (!not a single window open!) and I saw that it still was between 300MB - 400MB. I'm assuming this is due to Electron/TeamsForLinux not freeing memory when the window is minimized to the tray. This might be an optimization on your part, if that's the case, please make able to be disabled\n\n### What package are you using?\n\ndeb\n\n### Version\n\n1.12.7\n\n### Reproduction steps\n\n```markdown\n1. Close the window\n2. Compare memory usage with the memory usage before the window was closed\n3. See that it's still in the hundreds of megabytes\n```\n\n### Expected Behavior\n\n```markdown\n1. Close the window\n2. Compare memory usage with the memory usage before the window was closed\n3. See that it's been freed\n```\n\n### Debug\n\n```markdown\nNo config file found, using default values\nall good with appLogLevels you aren't using them\nInitialising logger with config: \"{}\"\n10:05:14.405 › File logging at /home/markus/.config/teams-for-linux/logs/main.log with level silly\n10:05:14.407 › Console logging enabled with level silly\n10:05:14.407 › Logger initialised\n10:05:14.407 › configPath: /home/markus/.config/teams-for-linux\n10:05:14.408 › configFile: {}\n10:05:14.410 › Running under Wayland, switching to PipeWire...\n10:05:14.731 › processArgs: [\n  '/opt/teams-for-linux/teams-for-linux',\n  '--webDebug',\n  '--logConfig={}'\n]\n10:05:14.733 › testing RegExp processArgs false\n10:05:14.733 › testing RegExp processArgs false\n10:05:14.734 › testing RegExp processArgs false\n10:05:14.735 › Waiting for network...\n10:05:14.735 › Testing network using net.request() for https://teams.microsoft.com\n10:05:14.738 › Spellchecker is disabled!\n[25136:0228/100514.900727:ERROR:browser_main_loop.cc(279)] Gtk: gtk_widget_add_accelerator: assertion 'GTK_IS_ACCEL_GROUP (accel_group)' failed\n[25136:0228/100514.900895:ERROR:browser_main_loop.cc(279)] Gtk: gtk_widget_add_accelerator: assertion 'GTK_IS_ACCEL_GROUP (accel_group)' failed\n[25136:0228/100514.900991:ERROR:browser_main_loop.cc(279)] Gtk: gtk_widget_add_accelerator: assertion 'GTK_IS_ACCEL_GROUP (accel_group)' failed\n[25136:0228/100514.901058:ERROR:browser_main_loop.cc(279)] Gtk: gtk_widget_add_accelerator: assertion 'GTK_IS_ACCEL_GROUP (accel_group)' failed\n[25136:0228/100514.903600:ERROR:browser_main_loop.cc(279)] Gtk: gtk_widget_add_accelerator: assertion 'GTK_IS_ACCEL_GROUP (accel_group)' failed\n[25136:0228/100514.956768:ERROR:nss_util.cc(345)] After loading Root Certs, loaded==false: NSS error code: -8018\n10:05:15.016 › Network test successful with method https\n10:05:15.017 › Loading initial URL...\n10:05:15.611 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\n[25136:0228/100515.614111:ERROR:object_proxy.cc(576)] Failed to call method: org.freedesktop.ScreenSaver.GetActive: object_path= /org/freedesktop/ScreenSaver: org.freedesktop.DBus.Error.NotSupported: This method is not implemented\n10:05:16.047 › did-frame-finish-load {} true\n10:05:16.048 › did-finish-load\n10:05:17.733 › cookie changed cause: overwrite \n removed?: true \n\n10:05:17.733 › cookie: authtoken \n expirationDate: 1740812069.034738 \n domain: teams.microsoft.com\n10:05:17.735 › cookie changed cause: explicit \n removed?: false \n\n10:05:17.735 › cookie: authtoken \n expirationDate: 1740812067.733219 \n domain: teams.microsoft.com\n10:05:18.254 › Badge count set to '0'\n10:05:18.315 › Badge count set to '0'\n10:05:20.214 › Badge count set to '0'\n10:05:22.327 › did-frame-finish-load {} false\n10:05:22.388 › Badge count set to '3'\n[25253:0228/100524.912116:ERROR:gl_surface_presentation_helper.cc(260)] GetVSyncParametersIfAvailable() failed for 1 times!\n10:05:25.638 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\n10:05:27.404 › window close\n10:05:36.058 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\n10:05:37.609 › window close\n10:05:37.771 › window closed\n10:05:37.773 › before-quit\n10:05:37.773 › will-quit\n10:05:37.773 › quit\n```\n\n### Additional context\n\n_No response_",
    "state": "closed",
    "created_at": "2025-02-28T09:10:04+00:00",
    "updated_at": "2025-03-03T16:06:19+00:00",
    "closed_at": "2025-03-03T16:06:18+00:00",
    "user": "Markus-included",
    "assignee": "IsmaelMartinez",
    "labels": [
        "bug"
    ],
    "comments_count": 1,
    "html_url": "https://github.com/IsmaelMartinez/teams-for-linux/issues/1580",
    "is_pull_request": false
}