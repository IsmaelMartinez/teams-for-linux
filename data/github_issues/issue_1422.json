{
    "id": 2549266678,
    "number": 1422,
    "title": "TFL has the wrong configPath on Ubuntu 24.04.1",
    "body": "**Describe the bug**\r\nSince moving to Ubuntu 24.04.1, I cannot get TFL to load my config\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install TFL snap package\r\n2. Start TFL - `teams-for-linux --appLogLevels error,warn,info,debug`\r\n3. Note the configPath `configPath: /home/akk/snap/teams-for-linux/671/.config/teams-for-linux`\r\n4. Note that configFile is empty `configFile: {}`\r\n\r\n**Expected behavior**\r\nI expected:\r\n1. configPath to be `configPath: /home/akk/.config/teams-for-linux`\r\n2. configFile to show contents of my configFile from when I was using Ubuntu 22.04\r\n\r\n**Screenshots**\r\nN/A\r\n\r\n**Desktop (please complete the following information):**\r\n - OS: Ubuntu 24.04.1\r\n - Installation package: snap\r\n - Version:  1.9.6\r\n\r\n**Debug**\r\n```\r\n$ > teams-for-linux --appLogLevels error,warn,info,debug\r\nupdate.go:85: cannot change mount namespace according to change mount (/var/lib/snapd/hostfs/boot /boot none bind,ro 0 0): permission denied\r\nNo config file found, using default values\r\nall good with appLogLevels you aren't using them\r\nInitialising logger with config: \"{}\"\r\nLogger initialised with transports: {}\r\n11:01:19.106 › File logging at /home/akk/snap/teams-for-linux/671/.config/teams-for-linux/logs/main.log with level silly\r\n11:01:19.107 › Console logging enabled with level silly\r\n11:01:19.107 › Logger initialised\r\n11:01:19.108 › configPath: /home/akk/snap/teams-for-linux/671/.config/teams-for-linux\r\n11:01:19.108 › configFile: {}\r\n```\r\n\r\nThe provide in this section the output from both the terminal and the browser debug console.\r\n\r\n```bash\r\n$ > teams-for-linux --webDebug --logConfig='{}'\r\nNo config file found, using default values\r\nall good with appLogLevels you aren't using them\r\nInitialising logger with config: \"{}\"\r\nLogger initialised with transports: {}\r\n11:12:45.174 › File logging at /home/akk/snap/teams-for-linux/671/.config/teams-for-linux/logs/main.log with level silly\r\n11:12:45.177 › Console logging enabled with level silly\r\n11:12:45.177 › Logger initialised\r\n11:12:45.177 › configPath: /home/akk/snap/teams-for-linux/671/.config/teams-for-linux\r\n11:12:45.177 › configFile: {}\r\ndbus-send: /snap/teams-for-linux/671/lib/x86_64-linux-gnu/libdbus-1.so.3: version `LIBDBUS_PRIVATE_1.12.20' not found (required by dbus-send)\r\n\r\n(teams-for-linux:2563551): Gtk-WARNING **: 11:12:45.240: Theme parsing error: gtk.css:1422:23: 'font-feature-settings' is not a valid property name\r\n\r\n(teams-for-linux:2563551): Gtk-WARNING **: 11:12:45.243: Theme parsing error: gtk.css:3308:25: 'font-feature-settings' is not a valid property name\r\n\r\n(teams-for-linux:2563551): Gtk-WARNING **: 11:12:45.243: Theme parsing error: gtk.css:3770:23: 'font-feature-settings' is not a valid property name\r\nlibGL error: MESA-LOADER: failed to open iris (search paths /snap/teams-for-linux/671/gnome-platform/usr/lib/x86_64-linux-gnu/dri)\r\nlibGL error: failed to load driver: iris\r\nlibGL error: MESA-LOADER: failed to open iris (search paths /snap/teams-for-linux/671/gnome-platform/usr/lib/x86_64-linux-gnu/dri)\r\nlibGL error: failed to load driver: iris\r\nlibGL error: MESA-LOADER: failed to open swrast (search paths /snap/teams-for-linux/671/gnome-platform/usr/lib/x86_64-linux-gnu/dri)\r\nlibGL error: failed to load driver: swrast\r\n[2563638:0926/111245.338742:ERROR:angle_platform_impl.cc(44)] Display.cpp:1086 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\r\nERR: Display.cpp:1086 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\r\n[2563638:0926/111245.338888:ERROR:gl_display.cc(515)] EGL Driver message (Critical) eglInitialize: Could not create a backing OpenGL context.\r\n[2563638:0926/111245.338968:ERROR:gl_display.cc(786)] eglInitialize OpenGL failed with error EGL_NOT_INITIALIZED, trying next display type\r\n[2563638:0926/111245.339989:ERROR:angle_platform_impl.cc(44)] Display.cpp:1086 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\r\nERR: Display.cpp:1086 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\r\n[2563638:0926/111245.340123:ERROR:gl_display.cc(515)] EGL Driver message (Critical) eglInitialize: Could not create a backing OpenGL context.\r\n[2563638:0926/111245.340144:ERROR:gl_display.cc(786)] eglInitialize OpenGLES failed with error EGL_NOT_INITIALIZED\r\n[2563638:0926/111245.340255:ERROR:gl_display.cc(820)] Initialization of all EGL display types failed.\r\n[2563638:0926/111245.340274:ERROR:gl_ozone_egl.cc(26)] GLDisplayEGL::Initialize failed.\r\n[2563638:0926/111245.342336:ERROR:angle_platform_impl.cc(44)] Display.cpp:1086 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\r\nERR: Display.cpp:1086 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\r\n[2563638:0926/111245.342372:ERROR:gl_display.cc(515)] EGL Driver message (Critical) eglInitialize: Could not create a backing OpenGL context.\r\n[2563638:0926/111245.342389:ERROR:gl_display.cc(786)] eglInitialize OpenGL failed with error EGL_NOT_INITIALIZED, trying next display type\r\n[2563638:0926/111245.343479:ERROR:angle_platform_impl.cc(44)] Display.cpp:1086 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\r\nERR: Display.cpp:1086 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\r\n[2563638:0926/111245.343498:ERROR:gl_display.cc(515)] EGL Driver message (Critical) eglInitialize: Could not create a backing OpenGL context.\r\n[2563638:0926/111245.343512:ERROR:gl_display.cc(786)] eglInitialize OpenGLES failed with error EGL_NOT_INITIALIZED\r\n[2563638:0926/111245.343525:ERROR:gl_display.cc(820)] Initialization of all EGL display types failed.\r\n[2563638:0926/111245.343540:ERROR:gl_ozone_egl.cc(26)] GLDisplayEGL::Initialize failed.\r\n[2563638:0926/111245.344226:ERROR:viz_main_impl.cc(198)] Exiting GPU process due to errors during initialization\r\n11:12:45.395 › processArgs: [\r\n  '/snap/teams-for-linux/671/teams-for-linux',\r\n  '--webDebug',\r\n  '--logConfig={}',\r\n  '--no-sandbox'\r\n]\r\n11:12:45.396 › testing RegExp processArgs false\r\n11:12:45.396 › testing RegExp processArgs false\r\n11:12:45.397 › testing RegExp processArgs false\r\n11:12:45.397 › testing RegExp processArgs false\r\n11:12:45.397 › Testing network using net.request() for https://teams.microsoft.com\r\n11:12:45.398 › Spellchecker is disabled!\r\n[2563551:0926/111245.421928:ERROR:object_proxy.cc(576)] Failed to call method: org.freedesktop.login1.Manager.Inhibit: object_path= /org/freedesktop/login1: org.freedesktop.DBus.Error.AccessDenied: An AppArmor policy prevents this sender from sending this message to this recipient; type=\"method_call\", sender=\":1.60740\" (uid=1000 pid=2563551 comm=\"/snap/teams-for-linux/671/teams-for-linux --webDeb\" label=\"snap.teams-for-linux.teams-for-linux (enforce)\") interface=\"org.freedesktop.login1.Manager\" member=\"Inhibit\" error name=\"(unset)\" requested_reply=\"0\" destination=\"org.freedesktop.login1\" (uid=0 pid=1663 comm=\"/usr/lib/systemd/systemd-logind\" label=\"unconfined\")\r\nlibGL error: MESA-LOADER: failed to open iris (search paths /snap/teams-for-linux/671/gnome-platform/usr/lib/x86_64-linux-gnu/dri)\r\nlibGL error: failed to load driver: iris\r\nlibGL error: MESA-LOADER: failed to open iris (search paths /snap/teams-for-linux/671/gnome-platform/usr/lib/x86_64-linux-gnu/dri)\r\nlibGL error: failed to load driver: iris\r\nlibGL error: MESA-LOADER: failed to open swrast (search paths /snap/teams-for-linux/671/gnome-platform/usr/lib/x86_64-linux-gnu/dri)\r\nlibGL error: failed to load driver: swrast\r\n[2563670:0926/111245.476699:ERROR:angle_platform_impl.cc(44)] Display.cpp:1086 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\r\nERR: Display.cpp:1086 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\r\n[2563670:0926/111245.476825:ERROR:gl_display.cc(515)] EGL Driver message (Critical) eglInitialize: Could not create a backing OpenGL context.\r\n[2563670:0926/111245.476843:ERROR:gl_display.cc(786)] eglInitialize OpenGL failed with error EGL_NOT_INITIALIZED, trying next display type\r\n[2563670:0926/111245.520139:ERROR:angle_platform_impl.cc(44)] Display.cpp:1086 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\r\nERR: Display.cpp:1086 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\r\n[2563670:0926/111245.520298:ERROR:gl_display.cc(515)] EGL Driver message (Critical) eglInitialize: Could not create a backing OpenGL context.\r\n[2563670:0926/111245.520339:ERROR:gl_display.cc(786)] eglInitialize OpenGLES failed with error EGL_NOT_INITIALIZED\r\n[2563670:0926/111245.520369:ERROR:gl_display.cc(820)] Initialization of all EGL display types failed.\r\n[2563670:0926/111245.520401:ERROR:gl_ozone_egl.cc(26)] GLDisplayEGL::Initialize failed.\r\n[2563670:0926/111245.524273:ERROR:angle_platform_impl.cc(44)] Display.cpp:1086 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\r\nERR: Display.cpp:1086 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\r\n[2563670:0926/111245.524404:ERROR:gl_display.cc(515)] EGL Driver message (Critical) eglInitialize: Could not create a backing OpenGL context.\r\n[2563670:0926/111245.524500:ERROR:gl_display.cc(786)] eglInitialize OpenGL failed with error EGL_NOT_INITIALIZED, trying next display type\r\n[2563670:0926/111245.543435:ERROR:angle_platform_impl.cc(44)] Display.cpp:1086 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\r\nERR: Display.cpp:1086 (initialize): ANGLE Display::initialize error 12289: Could not create a backing OpenGL context.\r\n[2563670:0926/111245.543559:ERROR:gl_display.cc(515)] EGL Driver message (Critical) eglInitialize: Could not create a backing OpenGL context.\r\n[2563670:0926/111245.543594:ERROR:gl_display.cc(786)] eglInitialize OpenGLES failed with error EGL_NOT_INITIALIZED\r\n[2563670:0926/111245.543624:ERROR:gl_display.cc(820)] Initialization of all EGL display types failed.\r\n[2563670:0926/111245.543651:ERROR:gl_ozone_egl.cc(26)] GLDisplayEGL::Initialize failed.\r\n[2563670:0926/111245.551340:ERROR:viz_main_impl.cc(198)] Exiting GPU process due to errors during initialization\r\n11:12:45.561 › Network test successful with method https\r\nMESA-LOADER: failed to open iris (search paths /snap/teams-for-linux/671/gnome-platform/usr/lib/x86_64-linux-gnu/dri)\r\nfailed to load driver: iris\r\nMESA-LOADER: failed to open kms_swrast (search paths /snap/teams-for-linux/671/gnome-platform/usr/lib/x86_64-linux-gnu/dri)\r\nfailed to load driver: kms_swrast\r\nMESA-LOADER: failed to open swrast (search paths /snap/teams-for-linux/671/gnome-platform/usr/lib/x86_64-linux-gnu/dri)\r\nfailed to load swrast driver\r\n[2563658:0926/111245.650917:ERROR:command_buffer_proxy_impl.cc(131)] ContextResult::kTransientFailure: Failed to send GpuControl.CreateCommandBuffer.\r\n11:12:45.823 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n[2563551:0926/111245.825895:ERROR:object_proxy.cc(576)] Failed to call method: org.freedesktop.ScreenSaver.GetActive: object_path= /org/freedesktop/ScreenSaver: org.freedesktop.DBus.Error.NotSupported: This method is not part of the idle inhibition specification: https://specifications.freedesktop.org/idle-inhibit-spec/latest/\r\n[2563551:0926/111245.999662:ERROR:CONSOLE(1)] \"Request Autofill.enable failed. {\"code\":-32601,\"message\":\"'Autofill.enable' wasn't found\"}\", source: devtools://devtools/bundled/core/protocol_client/protocol_client.js (1)\r\n11:12:46.660 › did-frame-finish-load {} true\r\n11:12:46.661 › did-finish-load\r\n11:12:47.188 › did-frame-finish-load {} false\r\n11:12:47.369 › assignOnDidFailLoadEventHandler : {} - -3 - \r\n11:12:47.525 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\r\n11:12:47.572 › did-frame-finish-load {} true\r\n11:12:47.573 › did-finish-load\r\n[2563551:0926/111247.764836:ERROR:CONSOLE(1)] \"Request Autofill.enable failed. {\"code\":-32601,\"message\":\"'Autofill.enable' wasn't found\"}\", source: devtools://devtools/bundled/core/protocol_client/protocol_client.js (1)\r\n11:12:47.768 › did-frame-finish-load {} false\r\n^C11:12:55.287 › before-quit\r\n11:12:55.288 › window close\r\n11:12:55.294 › window closed\r\n11:12:55.295 › will-quit\r\n11:12:55.295 › quit\r\n```\r\n\r\n*IMPORTANT:* Ensure that you mask any sensitive information before posting the output.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n",
    "state": "closed",
    "created_at": "2024-09-26T01:15:00+00:00",
    "updated_at": "2024-09-27T11:16:13+00:00",
    "closed_at": "2024-09-27T03:24:17+00:00",
    "user": "ak2766",
    "assignee": null,
    "labels": [],
    "comments_count": 5,
    "html_url": "https://github.com/IsmaelMartinez/teams-for-linux/issues/1422",
    "is_pull_request": false
}