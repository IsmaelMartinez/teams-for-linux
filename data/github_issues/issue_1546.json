{
    "id": 2793119285,
    "number": 1546,
    "title": "[Bug]: Passkey Login broken",
    "body": "### Can you reproduce this bug in the PWA?\n\nNo\n\n### Describe the bug\n\nPasskey Logins trigger a \"Your device will open a security window\" message, which never opens\n\n### What package are you using?\n\naur\n\n### Version\n\n1.12.5\n\n### Reproduction steps\n\n```markdown\n1. Select login option \"Passkey, Fingerprint or other\", or be forced to MFA using a passkey\n2. Try to login\n3. Instead of asking me for my yubikey pin, it will just do nothing\n4. When touching the yubikey before the unlock anyways, it will display an error\n```\n\n### Expected Behavior\n\n```markdown\n1. Select login option \"Passkey, Fingerprint or other\", or be forced to MFA using a passkey\n2. Try to login\n3. It will ask you for a pin or any other type of authentication\n4. After unlocking your yubikey (or something similar) you will be logged in\n```\n\n### Debug\n\n```markdown\n16:40:49.969 › File logging at /home/stephie/.config/teams-for-linux/logs/main.log with level silly\n16:40:49.970 › Console logging enabled with level silly\n16:40:49.970 › Logger initialised\n16:40:49.970 › configPath: /home/stephie/.config/teams-for-linux\n16:40:49.971 › configFile: {}\n16:40:49.972 › Running under Wayland, switching to PipeWire...\n16:40:50.135 › processArgs: [\n  '/opt/teams-for-linux/teams-for-linux',\n  '--webDebug',\n  '--logConfig={}'\n]\n16:40:50.136 › testing RegExp processArgs false\n16:40:50.136 › testing RegExp processArgs false\n16:40:50.137 › testing RegExp processArgs false\n16:40:50.137 › Waiting for network...\n16:40:50.137 › Testing network using net.request() for https://teams.microsoft.com\n16:40:50.138 › Spellchecker is disabled!\nlibva error: /usr/lib/dri/i965_drv_video.so init failed\n16:40:50.303 › Network test successful with method https\n16:40:51.387 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\n[221295:0116/164051.391606:ERROR:gl_surface_presentation_helper.cc(260)] GetVSyncParametersIfAvailable() failed for 1 times!\n[221160:0116/164052.138560:ERROR:service_worker_storage.cc(2072)] Failed to delete the database: Database IO error\n[221295:0116/164055.328339:ERROR:gl_surface_presentation_helper.cc(260)] GetVSyncParametersIfAvailable() failed for 2 times!\n16:40:55.476 › did-frame-finish-load {} true\n16:40:55.477 › did-finish-load\n16:41:05.320 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\n16:41:06.026 › did-frame-finish-load {} false\n16:41:06.304 › assignOnDidFailLoadEventHandler : {} - -3 - \n16:41:06.477 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\n16:41:06.508 › did-frame-finish-load {} true\n16:41:06.508 › did-finish-load\n16:41:06.598 › did-frame-finish-load {} false\n16:41:12.031 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\n16:41:12.058 › did-frame-finish-load {} true\n16:41:12.059 › did-finish-load\n# This is the part where it display's the error after trying to touch the yubikey (no pin asked)\n16:41:22.037 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\n16:41:32.038 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\n[221295:0116/164134.740232:ERROR:gl_surface_presentation_helper.cc(260)] GetVSyncParametersIfAvailable() failed for 3 times!\n16:41:42.039 › GetSystemIdleState => IdleTimeout: 300s, IdleTimeoutPollInterval: 10s, ActiveCheckPollInterval: 2s, IdleTime: 0s, IdleState: 'active'\n```\n\n### Additional context\n\n_No response_",
    "state": "closed",
    "created_at": "2025-01-16T15:42:42+00:00",
    "updated_at": "2025-01-16T15:57:33+00:00",
    "closed_at": "2025-01-16T15:57:26+00:00",
    "user": "EnderArchery",
    "assignee": "IsmaelMartinez",
    "labels": [
        "bug",
        "duplicate"
    ],
    "comments_count": 1,
    "html_url": "https://github.com/IsmaelMartinez/teams-for-linux/issues/1546",
    "is_pull_request": false
}